<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/blog/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="HCHLQ">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="HCHLQ">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="HC">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>HCHLQ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">HCHLQ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3setState/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3setState/" class="post-title-link" itemprop="url">react/深入理解setState</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 15:23:23 / Modified: 15:40:45" itemprop="dateCreated datePublished" datetime="2020-03-24T15:23:23+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="setState的第一个参数放一个函数或对象的区别"><a href="#setState的第一个参数放一个函数或对象的区别" class="headerlink" title="setState的第一个参数放一个函数或对象的区别"></a>setState的第一个参数放一个函数或对象的区别</h3><ul>
<li>相同点: 他们都是异步执行的</li>
<li>不同点: 放一个函数时它的参数prevState是等到上一次的状态改变时的新状态</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span><span class="comment">//这里的this.stata.n的值是0, 不会得到上一个state的n的值加一</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;<span class="comment">//这里的this.state.n的值还是0，</span></span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 最终的n会等于1, 不会等于3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    n : <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    n : <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    n : <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line">因此只加一次</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;<span class="comment">//这里的prevState会得到上个setState改变后的n的值，即得到1</span></span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;<span class="comment">//这里的prevState会得到上一个setState改变后的n的值，即得到2</span></span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">//最终的n的值是3</span></span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**上面三个setState的第一个参数都是传递一个函数的时候，这些函数会放入一个队列中取一次执行，上一个函数返回的新的state的值会传给下一个prevState,也就解释了为什么这样可以使n的值依次加1,最终的到3**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 实现同步的两种方式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">    n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        setState(&#123;</span><br><span class="line">            n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">        &#125;);</span><br><span class="line">        setState(&#123;</span><br><span class="line">            n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">        &#125;);</span><br><span class="line">        setState(&#123;</span><br><span class="line">            n : <span class="keyword">this</span>.state.n + <span class="number">1</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 注意的是，在setInterval中要使用箭头函数才能使用this，因为setInterval中的函数是由系统调用的，所以this执行不确定</span></span><br></pre></td></tr></table></figure>
<h3 id="当setState是异步的时候会进行合并处理，最后只进行一次render"><a href="#当setState是异步的时候会进行合并处理，最后只进行一次render" class="headerlink" title="当setState是异步的时候会进行合并处理，最后只进行一次render"></a>当setState是异步的时候会进行合并处理，最后只进行一次render</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/React%E8%A1%A5%E5%85%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/React%E8%A1%A5%E5%85%85/" class="post-title-link" itemprop="url">react/React补充</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 15:07:21 / Modified: 15:29:18" itemprop="dateCreated datePublished" datetime="2020-03-24T15:07:21+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="类组件渲染原理"><a href="#类组件渲染原理" class="headerlink" title="类组件渲染原理"></a>类组件渲染原理</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line"></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">`&lt;App id="123" /&gt;`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//传递给App的原理:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> App(&#123;</span><br><span class="line">    id: <span class="string">"123"</span></span><br><span class="line">&#125;).render()</span><br></pre></td></tr></table></figure>

<h1 id="jsx-原理"><a href="#jsx-原理" class="headerlink" title="jsx 原理"></a>jsx 原理</h1><ul>
<li>第一个是标签名，第二个是标签的属性，剩下的是标签的内容或者子元素</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">return(</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'root'</span> <span class="attr">className</span> =<span class="string">"el"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">            我是h1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">return (</span><br><span class="line">    React.createElement(&#123;</span><br><span class="line">        "div",</span><br><span class="line">        &#123;</span><br><span class="line">            className: "el",</span><br><span class="line">            id: "root"</span><br><span class="line">        &#125;,</span><br><span class="line">        React.createElement(&#123;</span><br><span class="line">            "h1",</span><br><span class="line">            null,</span><br><span class="line">            "我是h1"</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h2><h3 id="style"><a href="#style" class="headerlink" title="style"></a>style</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> style=&#123;&#123; <span class="attr">color</span>: <span class="string">"red"</span>... &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 引如 npm 包 <span class="string">`styled-component`</span> <span class="keyword">const</span> Title = styled.h1<span class="string">`color: red`</span> h1 元素就改为&lt;Title&gt;&lt;<span class="regexp">/Title&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="class"><a href="#class" class="headerlink" title="class"></a>class</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> className=<span class="string">" "</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 引入 npm 包 <span class="string">`classNames`</span> style=&#123; className=&#123; <span class="string">"a"</span>, &#123; <span class="string">"b"</span>: <span class="literal">true</span> &#125; &#125; &#125; 可以是多个类名</span><br></pre></td></tr></table></figure>
<h2 id="prop-types"><a href="#prop-types" class="headerlink" title="prop-types"></a>prop-types</h2><p>1 <code>cnpm install prop-types --save</code><br>2 使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> propTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">      render() &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">MyComponent.propTypes = &#123;<span class="comment">//直接可以写父组件传递过来的值</span></span><br><span class="line">    title: propTypes.string,</span><br><span class="line">    x: propTypes.number</span><br><span class="line">&#125; 或者使用</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        title: propTypes.string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="static-defaultProps-类中默认的props"><a href="#static-defaultProps-类中默认的props" class="headerlink" title="static defaultProps 类中默认的props"></a>static defaultProps 类中默认的props</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="dangerouslySetInnerHTML"><a href="#dangerouslySetInnerHTML" class="headerlink" title="dangerouslySetInnerHTML"></a>dangerouslySetInnerHTML</h2><ul>
<li>要想渲染state中的表标签，要使用dangerouslySetInnerHTML<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;</span> <span class="attr">__html:</span> <span class="attr">this.state.xxx</span> &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h2><p>1 setState({ xx })</p>
<p>2 异步 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setState(<span class="function">(<span class="params">prevState, prop</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>&#123; xx &#125;</span><br><span class="line">&#125;, () =&gt; &#123;</span><br><span class="line">    <span class="comment">//回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>如果state中是数组或对象，要往里边加值，首先要先复制一份出来，加完后再用setState更改state, 因为state中的值不能直接更改</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以数组为例</span></span><br><span class="line">handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newArr = [ ...arr ];</span><br><span class="line">    arr.push(&#123; <span class="attr">name</span>: <span class="string">'cc'</span> &#125;);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">arr</span>: newArr &#125;)</span><br><span class="line">    <span class="keyword">const</span> newArr = [...arr, &#123; <span class="attr">name</span>: <span class="string">'cc'</span> &#125;]</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">arr</span>: newArr &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="getDerivedStateFromProps-nextProp-nextState"><a href="#getDerivedStateFromProps-nextProp-nextState" class="headerlink" title="getDerivedStateFromProps(nextProp, nextState)"></a>getDerivedStateFromProps(nextProp, nextState)</h2><ul>
<li>可以返回一个对象，该对象会覆盖state<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    n: nextProp + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="getSnapShotBeforeUpdate-prevProps-prevState"><a href="#getSnapShotBeforeUpdate-prevProps-prevState" class="headerlink" title="getSnapShotBeforeUpdate(prevProps, prevState)"></a>getSnapShotBeforeUpdate(prevProps, prevState)</h2><ul>
<li>改参数的返回值会作为componentDidUpdate的第三个参数</li>
</ul>
<h2 id="表单元素-可以是受控组件，也可以是非受控组件"><a href="#表单元素-可以是受控组件，也可以是非受控组件" class="headerlink" title="表单元素(可以是受控组件，也可以是非受控组件)"></a>表单元素(可以是受控组件，也可以是非受控组件)</h2><ul>
<li><p><code>input select</code> 设置的onChange事件都是改<code>e.target.value</code></p>
</li>
<li><p>select的value={xxx}设置在select上，而不是在option上</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onChange </span></span><br><span class="line">handleChange = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> value = e.target.value;</span><br><span class="line">    <span class="keyword">const</span> name = e.target.name;<span class="comment">//name时表单的name属性,利用name可以在设置状态时对应到相应的state,以便可以多个表单元素使用( input select )</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        [name]: value</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="setState实现同步的三种方法"><a href="#setState实现同步的三种方法" class="headerlink" title="setState实现同步的三种方法"></a>setState实现同步的三种方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> setState(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;  &#125;), callback)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setState(&#123;&#125;)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> 使用原生事件</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'xx'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">    setState(&#123;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="订阅subscribe更新的三种方法"><a href="#订阅subscribe更新的三种方法" class="headerlink" title="订阅subscribe更新的三种方法"></a>订阅subscribe更新的三种方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> </span><br><span class="line">componentDidUpdate() &#123;</span><br><span class="line">    store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.forceUpdate()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> </span><br><span class="line">componentDidUpdate() &#123;</span><br><span class="line">    store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="keyword">const</span> render = () &#123;</span><br><span class="line">    ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br><span class="line">&#125;</span><br><span class="line">render();</span><br><span class="line">store.subscribe(render)</span><br></pre></td></tr></table></figure>
<h2 id="优化的三种方案"><a href="#优化的三种方案" class="headerlink" title="优化的三种方案"></a>优化的三种方案</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> shouldComponentUpdate(nextProps, nextState) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> </span><br><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">'react</span></span><br><span class="line"><span class="string">class Test extends PureComponent &#123;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3 import React, &#123; memo &#125; from '</span>react </span><br><span class="line">memo(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>) &#125;)</span><br></pre></td></tr></table></figure>


<h2 id="React-Children-map-forEach"><a href="#React-Children-map-forEach" class="headerlink" title="React.Children(.map | .forEach)"></a>React.Children(.map | .forEach)</h2><ul>
<li><p>接收该组件在父组件包裹起来传过来的标签等</p>
</li>
<li><p>如果只传一个标签，则是一个对象， 如果是多个标签，则是一个数组</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在Child组件中使用 --&gt;</span></span><br><span class="line">React.Children.map(this.props.children, (child) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"> <span class="comment">&lt;!-- child就是h1, h2 --&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h2><ul>
<li><p>404页面： 默认都会匹配，使用 <Switch></Switch></p>
</li>
<li><p>根路径: <code>/</code>默认是包容匹配，使用<Route exact></Route> 中的exact关键字</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/createElement%E5%92%8CcloneElement%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/createElement%E5%92%8CcloneElement%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">react/createElement和cloneElement的区别</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 14:54:34 / Modified: 15:25:43" itemprop="dateCreated datePublished" datetime="2020-03-24T14:54:34+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="createElement"><a href="#createElement" class="headerlink" title="createElement"></a>createElement</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> React.createElement(</span><br><span class="line">    type,</span><br><span class="line">    [props],</span><br><span class="line">    [...children]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>type可以是<strong>标签名字符串</strong>, 如 ‘div’, ‘span’等， 也可以传<strong>组件(函数或类组件)</strong></li>
<li>[props]是创建出来的React元素的属性</li>
<li>[…childre] 表示创建出来的组件的子元素等<br><code>[]</code>意思是可以不传</li>
</ul>
<h1 id="cloneElement"><a href="#cloneElement" class="headerlink" title="cloneElement"></a>cloneElement</h1><ul>
<li>以element元素为样板克隆并返回新的React元素<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(</span><br><span class="line">    element,</span><br><span class="line">    [props],</span><br><span class="line">    [...children]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>只有第一个参数与React.createElement不同而已，第一个参数传的是一个<strong>React元素</strong></li>
<li>React元素:  <code>const div = &lt;div&gt;&lt;/div&gt;</code>, div就是React元素，<strong>组件也是React元素</strong></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/Component/" class="post-title-link" itemprop="url">react/Component</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 14:49:21 / Modified: 15:25:26" itemprop="dateCreated datePublished" datetime="2020-03-24T14:49:21+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h1><ul>
<li><p>React没有那么多的api, 基本上全是组件, React的开发模式, 大体上可以用一个公式表达 <code>UI = F(state)</code> 界面 = render(){}</p>
</li>
<li><p>React.createClass有一个内置的魔法，可以自动绑定所用的方法，使得其this指向组件的实例化对象，但是其他JavaScript类并没有这种特性；</p>
</li>
</ul>
<h2 id="ant-design-组件库"><a href="#ant-design-组件库" class="headerlink" title="ant-design 组件库"></a>ant-design 组件库</h2><ul>
<li><p>安装 <code>cnpm install antd --save</code></p>
</li>
<li><p>antd按需加载<br>1 安装 <code>cnpm install react-app-rewired@2.0.2-next.0 babel-plugin-import --save</code><br>2 配置 package.json和config-overrides.js<br> package.json  </p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"start"</span>: <span class="string">"react-app-rewired start"</span>,</span><br><span class="line"><span class="string">"build"</span>: <span class="string">"react-app-rewired build"</span>,</span><br><span class="line"><span class="string">"test"</span>: <span class="string">"react-app-rewired test"</span>,</span><br><span class="line"><span class="string">"eject"</span>: <span class="string">"react-app-rewired eject"</span> <span class="string">`</span></span><br></pre></td></tr></table></figure>
<p> config.overrides.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; injectBabelPlugin &#125; = <span class="built_in">require</span>(<span class="string">'react-app-rewired'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">override</span>(<span class="params">config, env</span>) </span>&#123;</span><br><span class="line">    config = injectBabelPlugin([</span><br><span class="line">        <span class="string">'import'</span>, &#123;</span><br><span class="line">            libraryName: <span class="string">'antd'</span>,</span><br><span class="line">            libraryDirectory: <span class="string">'es'</span>,</span><br><span class="line">            style: <span class="string">'css'</span></span><br><span class="line">        &#125;</span><br><span class="line">    ], config);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="PureComponent-对比前后数据-可以减少渲染-提高性能"><a href="#PureComponent-对比前后数据-可以减少渲染-提高性能" class="headerlink" title="PureComponent 对比前后数据, 可以减少渲染, 提高性能"></a>PureComponent 对比前后数据, 可以减少渲染, 提高性能</h2><h2 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h2><ul>
<li>React v16.6之后的版本, 可以使用一个新功能 <code>React.memo</code>来实现完美React组件, 让函数式的组件, 也有了PureComponent的功能<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Compnent = React.memo(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123; props.xxx &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="容器组件-amp-展示组件"><a href="#容器组件-amp-展示组件" class="headerlink" title="容器组件 &amp; 展示组件"></a>容器组件 &amp; 展示组件</h2>容器组件: <code>class  xxx</code><br>展示组件: <code>function</code></li>
</ul>
<h2 id="高阶组件"><a href="#高阶组件" class="headerlink" title="高阶组件"></a>高阶组件</h2><ul>
<li><p>高阶函数: 将函数作为参数或者返回一个函数的函数叫做高阶函数</p>
</li>
<li><p>概念：高阶组件就是一个函数，且该函数接受一个组件作为参数，并返回一个新的组件</p>
</li>
<li><p>父组件传递props给子组件 ==&gt;  先传给高阶组件,高阶组件装饰该组件后再传给该组件</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">React</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123; props.name &#125; - &#123; props.age &#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125; </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const cpm = function(Com) &#123;</span></span><br><span class="line"><span class="regexp">    const age = 18;</span></span><br><span class="line"><span class="regexp">    return props =&gt; (</span></span><br><span class="line"><span class="regexp">        &lt;Com  &#123;...props&#125; &#123; age &#125; /</span>&gt;</span><br><span class="line">    ) || <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">newComp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> NewReact = <span class="keyword">new</span> cpm(react)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;NewReact data=&#123;<span class="attr">name</span>: <span class="string">'hc'</span>&#125;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>高阶组件链式调用可以用装饰器写法( 装饰器只能用于class类 )<br>1 <code>cnpm install --save-dev babel-plugin-transform-decoration-legacy</code><br>2 在config-overrides.js配置 添加<br><code>config = injectBabelPlugin([&#39;@babel/plugin-proposal-decorators&#39;, {&quot;legacy&quot;: true}])</code><br>3 使用: <code>@高阶函数名</code> 如果高阶函数无其他函数包裹, 则不用传参<br>4 有顺序<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> cpm = <span class="function"><span class="keyword">function</span>(<span class="params">Com</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">        &lt;Com  &#123;...props&#125; &#123; age &#125; /&gt;</span><br><span class="line">    ) || <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">newComp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@cpm</span><br><span class="line"><span class="comment">//React组件放在下面,得到的就是一个新的组件,自动调用该组件传递给cpm函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">React</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123; <span class="keyword">this</span>.props.name &#125; - &#123; <span class="keyword">this</span>.props.age &#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125; </span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ const NewReact = new cpm(react)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Cp extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;React data=&#123;name: 'hc'&#125;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="…props-state-39-abc-39"><a href="#…props-state-39-abc-39" class="headerlink" title="{…props} === state = &#39;abc&#39; ..."></a>{…props} === <code>state = &#39;abc&#39; ...</code></h2><h2 id="复合组件"><a href="#复合组件" class="headerlink" title="复合组件"></a>复合组件</h2><ul>
<li>children一般只能接收标签的内容，可以是标签，函数等jsx表达式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dialog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &#123;props.children&#125;</span><br><span class="line">        &#123;props.footer&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ Dialog等同与vue 的 slot</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function WelcomeDialog() &#123;</span></span><br><span class="line"><span class="regexp">    const footer = &lt;h2&gt; 我是插槽 &lt;/</span>h2&gt;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Dialog footer=&#123;footer&#125;&gt;  </span><br><span class="line">            &lt;h1&gt;welcome&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>Dialog&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> dafault WelcomeDialog</span><br><span class="line"></span><br><span class="line">props.children相当于 <span class="string">` &lt;h1&gt; welcome &lt;/h1&gt; `</span></span><br></pre></td></tr></table></figure>





<h2 id="React-Children"><a href="#React-Children" class="headerlink" title="React.Children"></a>React.Children</h2><ul>
<li><p>this.props.children  || props.children 是组件所有的子节点</p>
</li>
<li><p>this.props.children类型有三种可能:   1 若组件没有子节点，则为undefined  2 若只有一个节点，则为object   3 若为多个子节点，则为 Array</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ToList name=<span class="string">'xx'</span>&gt;</span><br><span class="line">    &lt;li&gt;飞剑侠&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;武尊神&lt;/</span>li&gt;</span><br><span class="line">    &lt;li&gt;逆天魔&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>ToList&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>this.props 打印==&gt; name=xxx children: Array(3)</li>
</ul>
<ul>
<li>children:<br>1 代表组件<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Menu&gt;</span><br><span class="line">   &lt;Item&gt;menu one&lt;<span class="regexp">/Item&gt;</span></span><br><span class="line"><span class="regexp">   &lt;Item&gt;menu two&lt;/</span>Item&gt;</span><br><span class="line"> &lt;<span class="regexp">/Menu&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const Item = (props) =&gt; &lt;li&gt;&#123;props.children&#125;&lt;/</span>li&gt;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;&#123;<span class="keyword">this</span>.props.children&#125;&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>2 代表函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Container&gt;</span><br><span class="line">  &#123;(text) =&gt; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">&lt;<span class="regexp">/Container&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Container extends Component &#123;</span></span><br><span class="line"><span class="regexp">  render () &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &#123;this.props.children('hello world')&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>3 React.Children()联合使用  以下</p>
<h3 id="React-Children-map"><a href="#React-Children-map" class="headerlink" title="React.Children.map"></a>React.Children.map</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;</span></span><br><span class="line"><span class="xml">                    React.Children.map(this.props.children, function(child)&#123;</span></span><br><span class="line"><span class="xml">                    console.log(child)  // MyList里面有节点，对这三个节点进行循环</span></span><br><span class="line"><span class="xml">                    return <span class="tag">&lt;<span class="name">li</span>&gt;</span>child<span class="tag">&lt;/<span class="name">li</span>&gt;</span>;</span></span><br><span class="line"><span class="xml">                &#125;)</span></span><br><span class="line"><span class="xml">            &#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;MyList&gt;</span><br><span class="line">            &lt;span&gt;飞剑侠&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">            &lt;span&gt;武尊神&lt;/</span>span&gt;</span><br><span class="line">            &lt;span&gt;逆天魔&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>MyList&gt;</span><br><span class="line">    ,<span class="built_in">document</span>.getElementById(<span class="string">'example'</span>));</span><br></pre></td></tr></table></figure>

<h3 id="React-Children-forEach"><a href="#React-Children-forEach" class="headerlink" title="React.Children.forEach"></a>React.Children.forEach</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ToList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       render() &#123;</span><br><span class="line">           <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;</span></span><br><span class="line"><span class="xml">               React.Children.forEach(this.props.children, function(child)&#123; //无返回值，要是想封装，需要自己创建array</span></span><br><span class="line"><span class="xml">                   console.log(child.props, child.key)</span></span><br><span class="line"><span class="xml">               &#125;)</span></span><br><span class="line"><span class="xml">           &#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   ReactDOM.render(</span><br><span class="line">       &lt;ToList&gt;</span><br><span class="line">           &lt;li key=<span class="string">"test1"</span>&gt;飞剑侠&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">           &lt;li key="test2"&gt;武尊神&lt;/</span>li&gt;</span><br><span class="line">           &lt;li key=<span class="string">"test3"</span>&gt;逆天魔&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">       &lt;/</span>ToList&gt;</span><br><span class="line">       ,<span class="built_in">document</span>.getElementById(<span class="string">'example'</span>));</span><br></pre></td></tr></table></figure>


<h3 id="React-Children-count-返回子元素的总和"><a href="#React-Children-count-返回子元素的总和" class="headerlink" title="React Children.count  返回子元素的总和"></a>React Children.count  返回子元素的总和</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ToList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.props)</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">const</span> count = React.Children.count(<span class="keyword">this</span>.props.children)</span><br><span class="line">            <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>一共有&#123;count&#125;个子元素<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#123;this.props.children&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;ToList&gt;</span><br><span class="line">            &lt;li&gt;飞剑侠&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">            &lt;li&gt;武尊神&lt;/</span>li&gt;</span><br><span class="line">            &lt;li&gt;逆天魔&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToList&gt;</span><br><span class="line">        ,<span class="built_in">document</span>.getElementById(<span class="string">'example'</span>));</span><br></pre></td></tr></table></figure>

<h2 id="React-cloneElement-子组件-添加的属性等"><a href="#React-cloneElement-子组件-添加的属性等" class="headerlink" title="React.cloneElement(子组件, {添加的属性等})"></a>React.cloneElement(子组件, {添加的属性等})</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/Hook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/Hook/" class="post-title-link" itemprop="url">react/Hook</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 14:30:09 / Modified: 15:25:49" itemprop="dateCreated datePublished" datetime="2020-03-24T14:30:09+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hook-钩子"><a href="#Hook-钩子" class="headerlink" title="Hook  钩子"></a>Hook  钩子</h1><ul>
<li>Hook是React16.8一个新增项，它可以让你在不编写class的情况下使用state以及其他的React特性， <strong>即是在函数中使用的，在类中不能使用</strong></li>
</ul>
<h2 id="useState-钩子"><a href="#useState-钩子" class="headerlink" title="useState 钩子"></a>useState 钩子</h2><pre><code>1 一个: const [count, setCount] = useState(0)
2 多个: const [fruits, setFruits] = useState([banana, apple, ...])</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 声明一个叫 “count” 的 state 变量。</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>useState 会返回一对值：当前状态和一个让你更新它的函数</li>
</ul>
<h2 id="useEffect-副作用钩子"><a href="#useEffect-副作用钩子" class="headerlink" title="useEffect 副作用钩子"></a>useEffect 副作用钩子</h2><ul>
<li>在 <code>componentDidMount componentDidUpdate componentWillUnMount</code> 时触发</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  xxx</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">//要想只在componentDidMount触发，只要传递第二个参数 是数组，可以放依赖, 只要该依赖不变，就不会触发useEffect</span></span><br></pre></td></tr></table></figure>

<h2 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h2><ul>
<li>传入<code>React.createContext()</code>返回的值, 即<code>const oContext = React.createContext()</code>;   <code>const ctx = useContext(oContext);</code></li>
</ul>
<h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><ul>
<li>useReducer(reducer, init), 一般用这两个参数，reducer就是reducer函数， init就是reducer函数中的state的初始值, 他会返回一个数组，一般解构来使用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = useReducer(reducer, init); </span><br><span class="line"><span class="comment">// 在“组件通信”这篇博客中有详细介绍了怎么使用</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="useCallback-fn-deps"><a href="#useCallback-fn-deps" class="headerlink" title="useCallback(fn, deps)"></a>useCallback(fn, deps)</h2><ul>
<li>该hook会返回第一个函数参数返回的值，记忆起来，第二个参数是一个数组依赖项，只有该依赖项改变时才会更新</li>
</ul>
<h2 id="useMemo-gt-fn-deps"><a href="#useMemo-gt-fn-deps" class="headerlink" title="useMemo(() =&gt; fn, deps);"></a>useMemo(() =&gt; fn, deps);</h2><!-- React.memo(传入一个函数组件)，是高阶组件 -->
<ul>
<li>该hook会返回第一个函数参数返回的函数，只有当依赖项改变时才会更改</li>
</ul>
<h2 id="自定义钩子"><a href="#自定义钩子" class="headerlink" title="自定义钩子"></a>自定义钩子</h2><p><strong>名字要用use开头， 在函数内部可以使用其他钩子</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在函数组件外使用</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// xxx</span></span><br><span class="line">  <span class="keyword">return</span> xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在函数组件内</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> age = useAge()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/Context/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/Context/" class="post-title-link" itemprop="url">react/Context</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 14:29:35 / Modified: 15:25:29" itemprop="dateCreated datePublished" datetime="2020-03-24T14:29:35+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="组件跨层级通信-Context"><a href="#组件跨层级通信-Context" class="headerlink" title="组件跨层级通信 - Context"></a>组件跨层级通信 - Context</h1><p><strong>上下文提供一种不需要每层设置props就能够跨多级组件传递数据的方式</strong></p>
<ul>
<li>Context相关的Api<br>1 <code>React.createContext</code>  创建上下文</li>
</ul>
<p>2 <code>Context.Provider</code>    提供上下文(传值)</p>
<p>3 <code>Class.contextType</code></p>
<p>4 <code>Context.Consumer</code>     包裹(消费者的方法)</p>
<p>5 # 附件四</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> myContext = React.createContext()</span><br><span class="line"><span class="keyword">const</span> &#123; Provider, Consumer &#125; = myContext</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//父组件内</span></span><br><span class="line"></span><br><span class="line">&lt;Provider value = &#123; &#123; <span class="attr">foo</span>: <span class="string">'bar'</span> &#125; &#125;&gt;</span><br><span class="line">    &lt;Consumer&gt;</span><br><span class="line">        &#123;value =&gt; <span class="xml"><span class="tag">&lt;<span class="name">Child</span> &#123; <span class="attr">...value</span> &#125;/&gt;</span></span> &#125;</span><br><span class="line">    &lt;<span class="regexp">/Consumer&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>Provider&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子组件内</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">prop</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123; prop &#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 方式2  hook中的useContext</span></span><br><span class="line"><span class="regexp">import React, &#123; useContext &#125; from 'react'</span></span><br><span class="line"><span class="regexp">const myContext = React.createContext();</span></span><br><span class="line"><span class="regexp">const &#123; Provider, Consumer &#125; = myContext</span></span><br><span class="line"><span class="regexp">function Child2() &#123;</span></span><br><span class="line"><span class="regexp">    const ctx = useContext(myContext);</span></span><br><span class="line"><span class="regexp">    return(</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;h1&gt;</span></span><br><span class="line"><span class="regexp">                &#123; ctx.foo &#125;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>h1&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">父组件内</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;Provider value=&#123;&#123; foo: 'bar' &#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Child2 /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3 使用类的 static.contextType</span></span><br><span class="line"><span class="keyword">const</span> myContext = React.createContext()</span><br><span class="line"><span class="keyword">const</span> &#123; Provider, consumer &#125; = myContext</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child3</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextType = myContext</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123; <span class="keyword">this</span>.context.foo &#125;<span class="comment">//必须叫context</span></span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 父类中</span></span><br><span class="line"><span class="regexp">&lt;Provider value=&#123;&#123; foo: 'bar' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">    &lt;Child3/</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/Provider&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="post-title-link" itemprop="url">react/React生命周期</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 14:03:27 / Modified: 15:26:56" itemprop="dateCreated datePublished" datetime="2020-03-24T14:03:27+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="16-0之前的生命周期"><a href="#16-0之前的生命周期" class="headerlink" title="16.0之前的生命周期"></a>16.0之前的生命周期</h1><h2 id="挂载过程"><a href="#挂载过程" class="headerlink" title="挂载过程"></a>挂载过程</h2><ul>
<li>constructor(props, context) {}</li>
</ul>
<p><strong>注意：只要使用了constructor()就必须写super(),否则会导致this指向错误</strong></p>
<ul>
<li>componentWillMount() {}</li>
<li>render() {}</li>
<li>componentDidMount() {}  在此进行网络请求</li>
</ul>
<h2 id="更新过程"><a href="#更新过程" class="headerlink" title="更新过程"></a>更新过程</h2><ul>
<li>componentWillReceiveProps(nextProps){} <strong>props改变触发</strong></li>
<li>shouldComponentUpdate(nextProps, nextState) {} 用于优化 </li>
<li>componentWillUpdate(nextProps, nextState) {}</li>
<li>render() {}</li>
<li>componentDidUpdate(nextProps, nextState) {}</li>
</ul>
<h2 id="卸载过程"><a href="#卸载过程" class="headerlink" title="卸载过程"></a>卸载过程</h2><ul>
<li>componentWillUnmount() {}</li>
</ul>
<h1 id="16-4之后的生命周期-删除了componetWillMount-componentWillReceiveProps-componentWillUpdate"><a href="#16-4之后的生命周期-删除了componetWillMount-componentWillReceiveProps-componentWillUpdate" class="headerlink" title="16.4之后的生命周期(删除了componetWillMount componentWillReceiveProps componentWillUpdate)"></a>16.4之后的生命周期(删除了componetWillMount componentWillReceiveProps componentWillUpdate)</h1><h2 id="挂载过程-1"><a href="#挂载过程-1" class="headerlink" title="挂载过程"></a>挂载过程</h2><ul>
<li>constructor(props, context) {}</li>
<li>static getDerivedStateFromProps(nextProps, nextState) {}</li>
</ul>
<p><strong>原来生命周期中的componentWillReceiveProps()方法判断前后两个 props 是否相同，如果不同再将新的 props 更新到相应的 state 上去。这样做一来会破坏 state 数据的单一数据源，导致组件状态变得不可预测，另一方面也会增加组件的重绘次数。</strong></p>
<ul>
<li>render() {}</li>
<li>componentDidMount() {}</li>
</ul>
<h2 id="更新过程-state-props的值改变触发的"><a href="#更新过程-state-props的值改变触发的" class="headerlink" title="更新过程 state props的值改变触发的"></a>更新过程 state props的值改变触发的</h2><ul>
<li>getDerivedStateFromProps(nextProps, nextState) { return xx }  <strong>必须要返回，返回的表示要更新的state</strong> </li>
<li>shouldComponetUpdate(nextProps, nextState) {}  </li>
<li>render() {}</li>
<li>getSnapShotBeforeUpdate() {}  返回的值将作为componentDidUpdate的第三个参数</li>
<li>componentDidUpdate() {}</li>
</ul>
<h2 id="卸载过程-1"><a href="#卸载过程-1" class="headerlink" title="卸载过程"></a>卸载过程</h2><ul>
<li>componentWillUnmout() {}</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/react/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/24/react/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">react/组件通信</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-24 12:10:27 / Modified: 15:25:24" itemprop="dateCreated datePublished" datetime="2020-03-24T12:10:27+08:00">2020-03-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h1><h2 id="react中组件通信的三种方式"><a href="#react中组件通信的三种方式" class="headerlink" title="react中组件通信的三种方式"></a>react中组件通信的三种方式</h2><ul>
<li>props<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件Parent</span></span><br><span class="line">render () &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">111</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Child a=&#123;a&#125;/&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 子组件接收</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 1 子组件是函数组件的情况下</span></span><br><span class="line"><span class="regexp">function Child(props) &#123;</span></span><br><span class="line"><span class="regexp">    return(</span></span><br><span class="line"><span class="regexp">        &lt;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;h1&gt; &#123; props.a &#125; &lt;/</span>h1&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 2 子组件是类组件的情况</span></span><br><span class="line"><span class="regexp">class Child extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">    render () &#123;</span></span><br><span class="line"><span class="regexp">        &lt;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;h1&gt; &#123; this.props.a &#125; &lt;/</span>h1&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p>context</p>
<figure class="highlight plain"><figcaption><span>&#123; Provider, Consumer &#125; </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">  - 三种方式</span><br><span class="line">    - Provider + Comsumer</span><br><span class="line">&#96;&#96;&#96;js</span><br><span class="line">import React, &#123; Component &#125; from &#39;react&#39;</span><br><span class="line">const &#123;Provider, Consumer &#125; &#x3D; React.createContext();</span><br><span class="line"></span><br><span class="line">function Child1(props) &#123;</span><br><span class="line">    console.log(props.value);&#x2F;&#x2F;得到value这个对象&#123; a:111 &#125;</span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;h1&gt;</span><br><span class="line">                Child1</span><br><span class="line">            &lt;&#x2F;h1&gt;</span><br><span class="line">        &lt;&#x2F;&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">class Context extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">                &lt;Provider value&#x3D;&#123; &#123; a: 111 &#125;  &#125;&gt;</span><br><span class="line">                    &lt;Consumer&gt;</span><br><span class="line">                        &#123;</span><br><span class="line">                            value &#x3D;&gt; (&lt;Child1 value&#x3D;&#123; value &#125;&gt;&lt;&#x2F;Child1&gt;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &lt;&#x2F;Consumer&gt;</span><br><span class="line">                &lt;&#x2F;Provider&gt;</span><br><span class="line">            &lt;&#x2F;&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default Context</span><br></pre></td></tr></table></figure>

<ul>
<li>useContext(函数中可以使用)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> oContext = React.createContext();</span><br><span class="line"><span class="keyword">const</span> &#123; Provider &#125; = oContext;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = useContext(oContext)</span><br><span class="line">    <span class="built_in">console</span>.log(ctx);<span class="comment">//得到对象&#123; a: 111 &#125;</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;h1&gt;</span><br><span class="line">                Child2</span><br><span class="line">            &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">                &lt;Provider value=&#123; &#123; <span class="attr">a</span>: <span class="number">111</span> &#125;  &#125;&gt;</span><br><span class="line">                    &lt;Child2&gt;&lt;<span class="regexp">/Child2&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>Provider&gt;</span><br><span class="line">            &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Context</span></span><br></pre></td></tr></table></figure></li>
<li>static contextType(类中使用)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">const</span> oContext = React.createContext();</span><br><span class="line"><span class="keyword">const</span> &#123; Provider &#125; = oContext;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child3</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextType = oContext;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.context);<span class="comment">//得到对象&#123; a: 111 &#125;</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;h1&gt;</span><br><span class="line">                Child3</span><br><span class="line">            &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">class Context extends Component &#123;</span></span><br><span class="line"><span class="regexp">    render() &#123;</span></span><br><span class="line"><span class="regexp">        return (</span></span><br><span class="line"><span class="regexp">            &lt;&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Provider value=&#123; &#123; a: 111 &#125;  &#125;&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;Child3&gt;&lt;/</span>Child3&gt;</span><br><span class="line">                &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Context</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<p><strong>一下我没有分离文件，希望以后你们要吧reducer action actionType Store单独分离开</strong></p>
<ul>
<li><p>redux | react-redux</p>
<ul>
<li><p>三种方式</p>
<ul>
<li><p>reducer createStore store.getStore store.dispatch store.subscribe</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oReducer</span>(<span class="params">state=&#123; count: <span class="number">0</span> &#125;, action </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"ADD"</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.count + <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'MINUS'</span>: </span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.count - <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> store = createStore(oReducer);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Redux</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.unsubscribe = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// this.forceUpdate()</span></span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillunmount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.unsubscribe()</span><br><span class="line">    &#125;</span><br><span class="line">     add = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'jadflk'</span>)</span><br><span class="line">        store.dispatch(&#123; <span class="attr">type</span>: <span class="string">"ADD"</span> &#125;) </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    minus = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        store.dispatch(&#123; <span class="attr">type</span>: <span class="string">"MINUS"</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(store.getState())</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">                &lt;button onClick=&#123; <span class="keyword">this</span>.add &#125;&gt;加<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;h1&gt; &#123; store.getState().count &#125; &lt;/</span>h1&gt;</span><br><span class="line">                &lt;button onClick=&#123; <span class="keyword">this</span>.minus &#125;&gt;减<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Redux;</span><br></pre></td></tr></table></figure></li>
<li><p>connect + Provider</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count, add, minus &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;&gt;</span><br><span class="line">                &lt;button onClick=&#123; add &#125; &gt;加<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;h1&gt; &#123; count &#125; &lt;/</span>h1&gt;</span><br><span class="line">                &lt;button onClick=&#123; minus &#125;&gt;减<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">    state =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            count: state</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        add: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'add'</span> &#125;),</span><br><span class="line">        minus: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'minus'</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">)(Test)</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oReducer</span>(<span class="params">state=<span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">            <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'minus'</span>: </span><br><span class="line">            <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">default</span>: </span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store =  createStore(oReducer);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;Provider store=&#123; store &#125;&gt;</span><br><span class="line">        &lt;App/&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp"> , document.getElementById('root'));</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>useReducer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useReducer, Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oReducer</span> (<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"add"</span>:</span><br><span class="line">            <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"minus"</span>: </span><br><span class="line">            <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = useReducer(oReducer, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">        &lt;button onClick=&#123; () =&gt; &#123; dispatch(&#123; <span class="attr">type</span>: <span class="string">'add'</span> &#125;) &#125; &#125;&gt;加<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">         &lt;h1&gt; &#123; state &#125; &lt;/</span>h1&gt;</span><br><span class="line">         &lt;button onClick=&#123; () =&gt; &#123; dispatch(&#123; <span class="attr">type</span>: <span class="string">'minus'</span> &#125;) &#125; &#125;&gt;减<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">         &lt;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/21/webpack/webpack%E6%90%AD%E5%BB%BA%E5%B0%8F%E5%9E%8B%E7%9A%84react%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/21/webpack/webpack%E6%90%AD%E5%BB%BA%E5%B0%8F%E5%9E%8B%E7%9A%84react%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">webpack/webpack搭建小型的react环境</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-21 23:57:36" itemprop="dateCreated datePublished" datetime="2020-03-21T23:57:36+08:00">2020-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 00:09:55" itemprop="dateModified" datetime="2020-03-22T00:09:55+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="首先配置一个webpack的配置环境"><a href="#首先配置一个webpack的配置环境" class="headerlink" title="首先配置一个webpack的配置环境"></a>首先配置一个webpack的配置环境</h1><ul>
<li><p>npm init -y 默认选中</p>
</li>
<li><p>cnpm install webpack webpack-cli –save-dev 局部安装webpack webpack-cli</p>
</li>
<li><p>cnpm install html-webpack-plugin –save-dev 安装可以将index.html自动引入入口的js文件</p>
</li>
<li><p>cnpm install webpack-dev-server –save-dev 安装本地的服务器环境</p>
</li>
</ul>
<h1 id="安装-cnpm-install-babel-loader-babel-core-babel-preset-env-react-dom-react-babel-preset-react"><a href="#安装-cnpm-install-babel-loader-babel-core-babel-preset-env-react-dom-react-babel-preset-react" class="headerlink" title="安装 cnpm install babel-loader @babel/core @babel/preset-env react-dom react @babel/preset-react"></a>安装 cnpm install babel-loader @babel/core @babel/preset-env react-dom react @babel/preset-react</h1><h1 id="配置-webpack-config-js-package-json-babelrc文件"><a href="#配置-webpack-config-js-package-json-babelrc文件" class="headerlink" title="配置 webpack.config.js package.json .babelrc文件"></a>配置 webpack.config.js package.json .babelrc文件</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'index.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mode: <span class="string">'development'</span>,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                use: <span class="string">'babel-loader'</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">            title: <span class="string">'react-01'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        port: <span class="number">8888</span>,</span><br><span class="line">        inline: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//.babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"presets"</span>: [</span><br><span class="line">        <span class="string">"@babel/preset-env"</span>, <span class="string">"@babel/preset-react"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"test1"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"keywords"</span>: [],</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"@babel/core"</span>: <span class="string">"^7.8.7"</span>,</span><br><span class="line">    <span class="string">"@babel/preset-env"</span>: <span class="string">"^7.8.7"</span>,</span><br><span class="line">    <span class="string">"@babel/preset-react"</span>: <span class="string">"^7.8.3"</span>,</span><br><span class="line">    <span class="string">"babel-loader"</span>: <span class="string">"^8.0.6"</span>,</span><br><span class="line">    <span class="string">"html-webpack-plugin"</span>: <span class="string">"^3.2.0"</span>,</span><br><span class="line">    <span class="string">"react"</span>: <span class="string">"^16.13.0"</span>,</span><br><span class="line">    <span class="string">"react-dom"</span>: <span class="string">"^16.13.0"</span>,</span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"^4.42.0"</span>,</span><br><span class="line">    <span class="string">"webpack-cli"</span>: <span class="string">"^3.3.11"</span>,</span><br><span class="line">    <span class="string">"webpack-dev-server"</span>: <span class="string">"^3.10.3"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/21/webpack/webpack%E6%90%AD%E5%BB%BA%E5%B0%8F%E5%9E%8Bvue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="HC">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCHLQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/blog/2020/03/21/webpack/webpack%E6%90%AD%E5%BB%BA%E5%B0%8F%E5%9E%8Bvue/" class="post-title-link" itemprop="url">webpack/webpack搭建小型vue</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-21 23:48:22" itemprop="dateCreated datePublished" datetime="2020-03-21T23:48:22+08:00">2020-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 00:03:02" itemprop="dateModified" datetime="2020-03-22T00:03:02+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="首先配置一个webpack的配置环境"><a href="#首先配置一个webpack的配置环境" class="headerlink" title="首先配置一个webpack的配置环境"></a>首先配置一个webpack的配置环境</h1><ul>
<li><p>npm init -y 默认选中</p>
</li>
<li><p>cnpm install webpack webpack-cli –save-dev 局部安装webpack webpack-cli</p>
</li>
<li><p>cnpm install html-webpack-plugin –save-dev 安装可以将index.html自动引入入口的js文件</p>
</li>
<li><p>cnpm install webpack-dev-server –save-dev 安装本地的服务器环境</p>
</li>
</ul>
<h1 id="安装-vue-vue-loader-vue-style-loader-vue-html-loader-vue-template-compiler"><a href="#安装-vue-vue-loader-vue-style-loader-vue-html-loader-vue-template-compiler" class="headerlink" title="安装 vue vue-loader vue-style-loader vue-html-loader vue-template-compiler"></a>安装 vue vue-loader vue-style-loader vue-html-loader vue-template-compiler</h1><h1 id="配置webpack-config-js-amp-amp-package-json"><a href="#配置webpack-config-js-amp-amp-package-json" class="headerlink" title="配置webpack.config.js &amp;&amp; package.json"></a>配置webpack.config.js &amp;&amp; package.json</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> VueWebpackPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>,<span class="comment">//环境</span></span><br><span class="line">    entry: <span class="string">'./index.js'</span>,<span class="comment">//入口文件</span></span><br><span class="line">    output: &#123;<span class="comment">//打包的出口文件</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">//处理.vue文件的css样式</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//处理遇到.vue结尾的文件</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">                use: <span class="string">'vue-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">//自动引入js入口文件</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">'./index.html'</span>,</span><br><span class="line">            filename: <span class="string">'index.html'</span>,</span><br><span class="line">            title: <span class="string">'vue-webpack'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">//vue环境必要的</span></span><br><span class="line">        <span class="keyword">new</span> VueWebpackPlugin()</span><br><span class="line">    ],</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        alias: &#123;<span class="comment">//省略导入vue/dist/vue.esm</span></span><br><span class="line">            <span class="string">"vue"</span>: <span class="string">'vue/dist/vue.esm'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;<span class="comment">//服务器环境</span></span><br><span class="line">        port: <span class="number">8888</span>,</span><br><span class="line">        inline: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//package.json(参考，只配置scripts即可)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"vue-webpack"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"webpack.config.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack"</span>,</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"keywords"</span>: [],</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"html-webpack-plugin"</span>: <span class="string">"^3.2.0"</span>,</span><br><span class="line">    <span class="string">"vue-html-loader"</span>: <span class="string">"^1.2.4"</span>,</span><br><span class="line">    <span class="string">"vue-loader"</span>: <span class="string">"^15.9.1"</span>,</span><br><span class="line">    <span class="string">"vue-style-loader"</span>: <span class="string">"^4.1.2"</span>,</span><br><span class="line">    <span class="string">"vue-template-compiler"</span>: <span class="string">"^2.6.11"</span>,</span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"^4.42.0"</span>,</span><br><span class="line">    <span class="string">"webpack-cli"</span>: <span class="string">"^3.3.11"</span>,</span><br><span class="line">    <span class="string">"webpack-dev-server"</span>: <span class="string">"^3.10.3"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"vue"</span>: <span class="string">"^2.6.11"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="extend next" rel="next" href="/blog/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">HC</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HC</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/muse.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
